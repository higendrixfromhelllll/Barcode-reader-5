Quagga.onDetected(function(result) {

  const code = result.codeResult.code;

  console.log("読み取り:", code);

 

  // ① 全体フォーマットチェック

  if (

    code.length === 15 &&

    code.startsWith("A") &&

    code.endsWith("A")

  ) {

    // ② UUUUU（5文字）を位置で抽出

    const subjectId = code.substr(5, 5);

 

    document.getElementById("result").textContent = subjectId;

 

    // ③ 誤連続読取防止

    Quagga.stop();

    setTimeout(() => Quagga.start(), 1500);

  }

});
